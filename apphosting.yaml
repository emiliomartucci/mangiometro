# apphosting.yaml
# Forza il runtime a Node.js 20 come da best practice
runtime: nodejs20

build:
  command: "npm run build"

start:
  command: "npm run start"

runConfig:
  maxInstances: 1

# Sintassi corretta per iniettare i segreti come variabili d'ambiente
env:
  - variable: GOOGLE_API_KEY
    secret: GOOGLE_API_KEY
  - variable: NEXT_SERVER_ACTIONS_ENCRYPTION_KEY
    secret: NEXT_SERVER_ACTIONS_ENCRYPTION_KEY

ingress:
  allowUnauthenticated: true

secrets:
  - GOOGLE_API_KEY
  - NEXT_SERVER_ACTIONS_ENCRYPTION_KEY
